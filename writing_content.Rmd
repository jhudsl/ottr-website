---
title: "Start writing content"
output:
  html_document:
    toc: true
    toc_float: true
---

Now you have a course repository on GitHub and you're ready to start writing content!

The OTTR content development process is designed around you opening what is called **pull requests**! Pull requests are a way to set up **proposed changes** (instead of direct changes) before you publish them. Pull requests allow for OTTR to test your proposed changes for issues like broken URLs or spelling errors. Importantly, pull requests also allow you to discuss proposed changes with others!

![](resources/images/pull_request_model.jpg)

## Method of writing content

We have two recommended ways of writing content that is based on your comfort and interest level in using Git and GitHub:

- [OTTR Entry Level](#ottr-entry-level) - if you do not have an interest in diving into GitHub, use this version. It is done completely through the GitHub web browser.
- [OTTR Advanced](#ottr-advanced) - If you are already familiar with Git and GitHub or are interested in starting to use them, we recommend this method. It will require a bit more learning, but Git and GitHub will be a great skill set for you to utilize; both for OTTR purposes and elsewhere for version control!

![](resources/images/methods_of_writing.jpg)

OTTR checks center around pull requests so you can avoid accidentally making your mistakes live in your courses.

When you file a pull request, this initiates a series of checks done automatically by GitHub actions which will help you as you add content to your course.

These checks will do important things like:
* Check that the all the urls actually take learners somewhere (`check-urls`)
* Check that the code is styled using the `styler` package (`style-and-sp-check`)
* Check that the spelling is correct using the `spelling` package (`style-and-sp-check`)
* Create previews of the rendered versions of the course (`render-preview`)
* Check the formatting of any quizzes (`check-quizzes`)

You can adjust what checks are run by editing the `config_automation.yml` file. This is further discussed in this section about [customizing GitHub Actions](./customize-robots.html).

- [Jump to OTTR Entry Level instructions here](#ottr-entry-level)  
- [Jump to OTTR Advanced instructions here](#ottr-advanced)

# OTTR Entry Level

You can edit and add content directly in the GitHub website if you prefer not to learn Git and GitHub (though we highly recommend it, as knowing how to use Git/GitHub is a useful skill to integrate into your workflow -- not just for OTTR).

## Create a new branch

With GitHub in order to keep your OTTR course preserved content and code is managed through the use of branches. To explain branches we'll mainly refer to two branches: your `main` branch:

![](resources/images/main_branch.png)

The `main` branch is what your content will be published from and it will be live to any learners looking at your course. You will want to keep this `main` branch as preserved and well curated as possible!

So when you are ready to add more content you will want to have an isolated copy of your files to work from that keeps your main branch safe as you work. You can name the branch you work from whatever you like -- its recommended you name it something related to the changes you are working on

![](resources/images/working_branch.png)

To create a new branch through the GitHub website, you will go to your main course repository page, click on the `Switch Branches` button.

Type in a name for your new branch; something that relates to the changes you are making. For the purposes of this example, we'll call this new branch, `new-changes`.

Then click `Create branch: new-changes from main`.

![](resources/images/new-branch.png)

Congrats! You've made a new branch. GitHub will automatically show you your new branch's files (which have been copied from the `main`).

![](resources/images/main_branch_safe.png)

Whenever you are making changes, you'll want to check that you are on your new branch in order to add any new changes to your pull request.

## Committing changes

In your OTTR repository, on your new branch, you can now add/edit/rename currently existing files while protexting your `main` branch. Adding changes to a branch is called making `commits`.

- [Follow GitHub's instructions about managing files through their website here](https://docs.github.com/en/repositories/working-with-files/managing-files).

After every edit you make, scroll down and make sure that you choose `Commit directly to the new-changes branch.`. This will add your changes to the pull request and thus allowing for these changes to be run through the OTTR checks.

Then click `Commit changes`.
You will need to do this after every change to add them to your branch.

Now you are ready to open your pull request.

- [Jump to that section to read how to do this!](#open-a-pull-request)

# OTTR Advanced

If you are interested in engaging with GitHub (or already know how), we recommend interacting with GitHub and Git outside of the GitHub website to create your pull requests.

If you are new to Git and GitHub, it is recommended you use a Git client to help you manage your branches more easily. Install [GitKraken](https://www.gitkraken.com/) for a handy way to manage your course locally. These steps shown here will show you the GitKraken way of handling files.

If you are not new to GitHub, then we recommend skipping this section and jumping to the [`Setting Up Images` section](#set-up-images).

## Cloning with Git

In the GitHub workflow (when not using our Entry-Level writing method), files exist online (remote) and on your computer (local).

![](resources/images/remote.png)

To get going, you will need to `clone` the course repository to your own computer. Having a local copy of the files you are working from makes it easier to work from.
Cloning is just making a local copy on your computer of the remote version of the project on GitHub.

![](resources/images/cloning.png)

To get started, you will need to clone your course's repository that you created, as you will be using it for the duration of writing your course.

To clone a GitHub repository, using GitKraken, first, click `Clone a repo`. Then, choose where youâ€™d like the repository to be on your computer using the `Browse` button. You will need to `Copy + Paste` your new repository's url to  where it says `URL`.

![](resources/images/cloning_2.png)

Navigate to your repository on GitHub to copy the URL. Copying and pasting is advisable because any little typo will inhibit cloning.

Now you are ready to click `Clone the repository`! It will ask you if you'd like to `Open Now`, click that.

## Create a new branch

Handling branches is where you unleash the real benefit of GitHub, but it can be confusing at first.

With GitHub in order to keep your OTTR course preserved content and code is managed through the use of branches.

To explain branches we'll mainly refer to two branches: your `main` branch:

![](resources/images/main_branch.png)

The `main` branch is what your content will be published from and it will be live to any learners looking at your course. You will want to keep this `main` branch as preserved and well curated as possible!

So when you are ready to add more content you will want to have an isolated copy of your files to work from that keeps your main branch safe as you work. You can name the branch you work from whatever you like -- its recommended you name it something related to the changes you are working on

The best way to get a grasp of what the branches represent is to create one and start using it.

![](resources/images/a_new_branch_gitkraken.png)

In GitKraken we can create a new branch; this will be your working copy. First, click the `Branch` button. Next, type in a branch name in the box that the cursor is blinking in. In our example, we are calling it `a-new-branch`. Now click `Enter`! Now you have a new branch!

![](resources/images/main_branch_safe.png)

Now we can add/edit/rename currently existing files in our new branch, knowing that the content and code in the `main` branch is safe.

## Committing changes

Adding changes to a branch is called making `commits`.
To modify any files in a branch we have to first 1) Make our changes as we normally would and then 2) Commit those changes.

To commit changes, first, edit a file, you can use any text editor you prefer (can double click a file locally to open it up). For the purposes of this example, it doesn't matter what change you make just make it small and something you'll notice later.

![](resources/images/edit_a_file.png)

If you've made a change to any file in your repository, it will appear in GitKraken and you can click on it to see the differences.

![](resources/images/add_file.png)

If we want to add these file changes to our current branch, we need to `commit` them.

![](resources/images/commit_a_file.png)

Great! Now the changes you've made have been added to your local branch.

## Pushing changes

Note that when you've committed your changes locally, those changes won't be on the online version of your repository.
To get them to the remote, GitHub internet copy, we will need to `push` your commits.

Now that we have changes committed to our branch we are ready to also add them to the remote, GitHub internet copy!

![](resources/images/push_changes.png)

To **push** means to add changes that are on your new branch to the remote branch (internet version on GitHub). The word **origin** just refers to where your branch is stored on the internet. Choose your origin in the dropdown menu and click `Submit`.

![](resources/images/push_changes_gitkraken.png)

# Open a pull request

After a variable number of commits, your branch, called `a-new-branch` is a different version of the original code base that may have a nifty improvement to it. But our main goal is to add that nifty improvement to the `main` branch. To start this process of bringing in new changes to the main curated repository, we will create a pull request.

From GitHub:

> Pull requests let you tell others about changes you've pushed to a GitHub repository. Once a pull request is sent, interested parties can review the set of changes, discuss potential modifications, and even push follow-up commits if necessary.

Pull Requests are the meat of how code changes and improvements get reviewed and incorporated! A vast majority of the benefits of incorporating GitHub into your workflow centers around fully utilizing the power of pull requests!

![](resources/images/pull_request.png)

Now we can open up a pull request if we go to our GitHub repository on GitHub.

![](resources/images/open_pr.png)

After you click on `Compare & pull request` you'll be taken to a screen where you can add information about your changes. After you are done writing your description, click `Create Pull Request`! (If you don't have your pull request description _perfect_ don't worry about it, you can always edit it later).

Congrats! You've just opened a pull request! For every set of changes you'll make to your course, you will want to follow this similar set of steps.

**To summarize, here's what those steps are:**  

![](resources/images/summary.png)

# Checks on the pull requests

With your pull request open, the series of OTTR GitHub actions checks will commence! They will print out reports as comments on your pull request.

![](https://raw.githubusercontent.com/jhudsl/OTTR_Template/main/resources/screenshots/gha-checks.png)

Read those comments to begin addressing the problems with more commits to your branch.

You can adjust what checks are run by editing the `config_automation.yml` file. This is further discussed in this section about [the GitHub Actions](https://github.com/jhudsl/OTTR_Template/wiki/How-to-set-up-and-customize-GitHub-actions-robots).

If you need more information on failed GitHub actions you can scroll to the bottom of your pull request where the status of the checks are shown and click on `Details` for more information. If you are unsure what the error message means and have trouble addressing it, please [file an issue on the OTTR_Template repository to get help](https://github.com/jhudsl/OTTR_Template/issues/new?assignees=cansavvy&labels=bug&template=course-template-problem-report.md).

For more on [what to put in a pull request's description, you can read this chapter](https://jhudatascience.org/Adv_Reproducibility_in_Cancer_Informatics/engaging-in-code-review---as-an-author.html)

For more on [how to review a pull request, see this chapter](https://jhudatascience.org/Adv_Reproducibility_in_Cancer_Informatics/engaging-in-code-review---as-a-reviewer.html)

![](resources/images/summary_2.png)

# Adding new chapters

Adding new chapters to your OTTR course, requires some specific steps in addition to what we've discussed here.

### Step 1) Add a new chapter Rmd file

Follow the instructions for [adding a new file](](https://docs.github.com/en/repositories/working-with-files/managing-files/adding-a-file-to-a-repository)), but make sure that you name the file something ending in `.Rmd` and add it to your new branch.

### Step 2) Add the name of your new chapter to your _bookdown.yml file

As you modify the names of the chapters of your course and add more chapters (using the `.Rmd` files), you need to update the `_bookdown.yml` file accordingly.

For example let's say that we added another chapter and named the file `03-new_chapter_of_course.Rmd`.
We would update our `_bookdown.yml` to look like this:

```yaml
book_filename: "Course_Name"  
chapter_name: "Chapter "  
repo: https://github.com/jhudsl/OTTR_Template/ ##Make sure you update this for your GitHub Repo!!  
rmd_files: ["index.Rmd",  
            "01-intro.Rmd",   
            "02-chapter_of_course.Rmd",   
            "03-new_chapter_of_course.Rmd",  ##Only this is new!
            "about.Rmd"]  
new_session: yes  
delete_merged_file: true  
language:  
  ui:  
    chapter_name: "Chapter "  
output_dir: "docs"  
```

**Important:** Notice how only one line is different - the one that says `03-chapter_of_course.Rmd",`
Be careful about quotation marks: `""` as well as commas: `,`!


### Step 3) Commit the _bookdown.yml file changes to the current branch
Follow the steps for how to commit changes and commit the edits to your `_bookdown.yml` file to your current branch.

### Step 4) Go to your Pull Request to see how the checks turn out
Go to your repository and click on the `Pull Request` button in the navbar.

## More resources for learning GitHub

- [Using version control with GitHub](https://jhudatascience.org/Adv_Reproducibility_in_Cancer_Informatics/using-version-control-with-github.html)
- [Happy Git and GitHub for the useR](https://happygitwithr.com/)
- [GitHub for data scientists](https://towardsdatascience.com/introduction-to-github-for-data-scientists-2cf8b9b25fba)
- [Intro to GitHub](https://lab.github.com/githubtraining/introduction-to-github)
- [First Day on GitHub](https://lab.github.com/githubtraining/first-day-on-github)
- [First Week on GitHub](https://lab.github.com/githubtraining/first-week-on-github)
- [GitHub docs about creating a Pull Request](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/creating-a-pull-request)
- [Making a Pull Request](https://www.atlassian.com/git/tutorials/making-a-pull-request)

***

# Set up images

To maintain style and attributions for graphics and images, as well as to enable easy updates in the future, you can have all your images stored in a central Google Slide document.

We encourage this strategy for several reasons:

- OTTR can interact with Google Slides to allow you to get all image updates of your current Google Slides whenever you re-render the content (no juggling different file versions of your images).
- Google Slides are easily shareable with your collaborators
- Google Slides is free
- Storing your images on Google slides allows them to be in one central location and may be helpful for you to re-use the media from your course in the future
- You can make videos of your slides that can be added to your course using `ari`

**Important:** :warning: Your Google Slide document must be set to `Anyone with a link`. See [this article for more details.](https://support.wix.com/en/article/setting-permissions-for-google-drive-files-and-folders#:~:text=Settings%20Permissions%20for%20a%20Google,edit%20and%20comment%20as%20well.) The renders will fail if this is not set!

Each Rmd file with images that is a part of your Bookdown needs to have this chunk at the beginning so that images are stored properly for Leanpub conversion.

If you are unfamiliar with [how R Markdown code chunks work, read this](https://rmarkdown.rstudio.com/lesson-3.html).

<img src = "resources/images/set_knitr_image_path.png" width = 400>

Next, import the appropriate theme (see [this video](https://youtu.be/pNbwF263yY8) for assistance):

## Accessibility

Each slide and image added to the courses should be accessible so every member of your audience can use your content.

There are two things to check for each slide:

- [ ] Each slide is described in the notes of the slide so learners relying on a screen reader can access the content. See https://lastcallmedia.com/blog/accessible-comics for more guidance on this.

- [ ] The color palette choices of the slide are contrasted in a way that is friendly to those with color vision deficiencies.
You can check this using [Color Oracle](https://colororacle.org/).

## Adding images and graphics in text

All images should be included in your Google Slides with the captions we discussed above.
To add images in the text in your Rmd, use the `ottrpal::include_slide()` within an [R code chunk](https://bookdown.org/yihui/rmarkdown/r-code.html).

<img src = "resources/images/include_slide.png" width = 600>

You can obtain the <google_slide_url> by viewing the slide with the image you want to add and copying the address from the browser search bar.

![Google slide url](https://raw.githubusercontent.com/jhudsl/OTTR_Template/main/resources/screenshots/slide_url.png)

Also add notes (the same as the `fig.alt` text) to each slide in the google slide presentation describing the text or images of the slide to allow for the content to be accessible to vision impaired individuals, as this can be converted to audio. Note that you can't have any line breaks within the `fig.alt` text. If there are no line breaks the text should appear blue within the code chunk.

The `echo=FALSE` ensures that the r code is hidden from your course, while the `out.width = "100%"` is used to size the image. We generally recommend going with larger images.

_You must define `fig.alt` in the code chunk options/parameters to pass to `knitr`._
You can adjust the size(fig.hight, fig.width, out.width, out.height), alignment (fig.align), or caption (fig.cap) of the image you can use these arguments in the code chunk tag:  

<img src = "resources/images/header.png" width = 400>

Google Slides must be **public**. Share settings must be set to "Anyone on the internet with this link can view". Note that "Private" is the default setting when you make a new presentation.

See [Chapter 2](https://github.com/jhudsl/OTTR_Template/blob/main/02-chapter_of_course.Rmd) of the template course for examples.

## Adding videos in text

To add a youtube video to your Rmd files use the following:

To get the appropriate youtube url do the following:
1) Click on the **SHARE** button on the lower right corner of the video on youtube
2) Click on the **Embed** option on the far left
3) Copy just the part after `"src ="` and paste the url into the `knitr::include_url()` function

Again, it is important to use the `echo=FALSE` option so that only the video is shown and not the code to generate it.

See [Chapter 2](https://github.com/jhudsl/OTTR_Template/blob/main/02-chapter_of_course.Rmd) of the template course for examples.

## Adding embedded files to text

Sometimes it is useful to include an embedded version of a website or file on a website, if there is a particularly important link and you don't want to rely on learners clicking the link.

To include such a file or website do the following:

<img src = "resources/images/include_url.png" width = 600>

Again you will need to include `echo = FALSE` to ensure that the code to generate the preview of the website or file is not included in your course material.

<img src = "resources/images/include_url_2.png" width = 600>

If you want to include a file that is not hosted online, consider hosting it on GitHub using the method described for hosting your Bookdown version of the course. See the [Set up GitHub pages](https://github.com/jhudsl/OTTR_Template/wiki/Starting-a-new-course-with-this-template#set-up-github-pages) section.

Then you would do the following, where the url is that of your hosted file:

<img src = "resources/images/include_url_3.png" width = 600>

See [Chapter 2](https://github.com/jhudsl/OTTR_Template/blob/main/02-chapter_of_course.Rmd) of the template course for examples.
